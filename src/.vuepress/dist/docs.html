<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Documentation | Astro Forms</title>
    <meta name="description" content="An approachable iOS forms framework for building beautiful, reusable and easy to maintain forms.">
    
    
    <link rel="preload" href="/assets/css/0.styles.c3b29f81.css" as="style"><link rel="preload" href="/assets/js/app.7c8fe348.js" as="script"><link rel="preload" href="/assets/js/5.171457a9.js" as="script"><link rel="prefetch" href="/assets/js/2.cda51ec0.js"><link rel="prefetch" href="/assets/js/3.93fb9c93.js"><link rel="prefetch" href="/assets/js/4.6afc0e9b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c3b29f81.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Astro Forms</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/docs.html" class="nav-link router-link-exact-active router-link-active">Docs</a></div><div class="nav-item"><a href="https://github.com/plummer/astro-forms" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/plummer/astro-forms/tree/master/Example" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Example Project
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/docs.html" class="nav-link router-link-exact-active router-link-active">Docs</a></div><div class="nav-item"><a href="https://github.com/plummer/astro-forms" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/plummer/astro-forms/tree/master/Example" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Example Project
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Documentation</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/docs.html#form" class="sidebar-link">Form</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs.html#creating-a-form" class="sidebar-link">Creating a Form</a></li><li class="sidebar-sub-header"><a href="/docs.html#adding-a-row" class="sidebar-link">Adding a Row</a></li><li class="sidebar-sub-header"><a href="/docs.html#row-tags-in-forms" class="sidebar-link">Row Tags in Forms</a></li><li class="sidebar-sub-header"><a href="/docs.html#finding-a-row" class="sidebar-link">Finding a Row</a></li><li class="sidebar-sub-header"><a href="/docs.html#removing-a-row" class="sidebar-link">Removing a Row</a></li><li class="sidebar-sub-header"><a href="/docs.html#responding-to-row-changes" class="sidebar-link">Responding to Row Changes</a></li></ul></li><li><a href="/docs.html#row" class="sidebar-link">Row</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs.html#creating-a-row" class="sidebar-link">Creating a Row</a></li><li class="sidebar-sub-header"><a href="/docs.html#value-rows" class="sidebar-link">Value Rows</a></li><li class="sidebar-sub-header"><a href="/docs.html#responding-to-view-changes" class="sidebar-link">Responding to View Changes</a></li><li class="sidebar-sub-header"><a href="/docs.html#focusable-rows" class="sidebar-link">Focusable Rows</a></li><li class="sidebar-sub-header"><a href="/docs.html#helpers" class="sidebar-link">Helpers</a></li></ul></li><li><a href="/docs.html#validation" class="sidebar-link">Validation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs.html#validation-methods" class="sidebar-link">Validation Methods</a></li><li class="sidebar-sub-header"><a href="/docs.html#basic-validation" class="sidebar-link">Basic Validation</a></li><li class="sidebar-sub-header"><a href="/docs.html#validation-messages" class="sidebar-link">Validation Messages</a></li><li class="sidebar-sub-header"><a href="/docs.html#validation-list" class="sidebar-link">Validation List</a></li><li class="sidebar-sub-header"><a href="/docs.html#named-validation-rules" class="sidebar-link">Named Validation Rules</a></li></ul></li><li><a href="/docs.html#theming" class="sidebar-link">Theming</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs.html#creating-a-theme" class="sidebar-link">Creating a Theme</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="documentation"><a href="#documentation" aria-hidden="true" class="header-anchor">#</a> Documentation</h1> <h2 id="form"><a href="#form" aria-hidden="true" class="header-anchor">#</a> Form</h2> <p>A <code>Form</code> in Astro Forms maintains a collection of rows, responds to row changes, and validates rows.</p> <h3 id="creating-a-form"><a href="#creating-a-form" aria-hidden="true" class="header-anchor">#</a> Creating a Form</h3> <p>To create a form, simply subclass <code>Form</code>.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">AstroForms</span>

<span class="token keyword">class</span> <span class="token class-name">LoginForm</span><span class="token punctuation">:</span> <span class="token builtin">Form</span> <span class="token punctuation">{</span>
	<span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>As <code>Form</code> is a subclass of <code>UIView</code>, just add the class in Interface Builder to add it to your <code>UIViewController</code>.</p> <h3 id="adding-a-row"><a href="#adding-a-row" aria-hidden="true" class="header-anchor">#</a> Adding a Row</h3> <p>Forms have <code>add(_:)</code> and <code>insert(_: at:)</code> instance methods for adding rows to a form.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">public</span> <span class="token keyword">func</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">_</span> row<span class="token punctuation">:</span> <span class="token builtin">AnyRow</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">public</span> <span class="token keyword">func</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">_</span> row<span class="token punctuation">:</span> <span class="token builtin">AnyRow</span><span class="token punctuation">,</span> at index<span class="token punctuation">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span>
</code></pre></div><p>To add a row, simply call the add/insert method at any point, for example:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">AstroForms</span>

<span class="token keyword">class</span> <span class="token class-name">LoginForm</span><span class="token punctuation">:</span> <span class="token builtin">Form</span> <span class="token punctuation">{</span>
	
	<span class="token keyword">enum</span> <span class="token builtin">LoginFormTag</span><span class="token punctuation">:</span> <span class="token builtin">RowTag</span><span class="token punctuation">,</span> <span class="token builtin">Equatable</span> <span class="token punctuation">{</span>
		<span class="token keyword">case</span> fullName
	<span class="token punctuation">}</span>

	<span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function">awakeFromNib</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">awakeFromNib</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

		<span class="token keyword">let</span> fullNameRow <span class="token operator">=</span> <span class="token function">TextFieldRow</span><span class="token punctuation">(</span>tag<span class="token punctuation">:</span> <span class="token builtin">LoginFormTag</span><span class="token punctuation">.</span>fullName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            $<span class="token number">0</span><span class="token punctuation">.</span>view<span class="token punctuation">.</span>label<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">&quot;Full Name&quot;</span>
            $<span class="token number">0</span><span class="token punctuation">.</span>view<span class="token punctuation">.</span>textField<span class="token punctuation">.</span>placeholder <span class="token operator">=</span> <span class="token string">&quot;Enter your name...&quot;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Adding the row here</span>
        <span class="token function">add</span><span class="token punctuation">(</span>fullNameRow<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>Once added, these rows are available via the <code>rows</code> property, an instance variable of type <code>[AnyRow]</code>.</p> <h3 id="row-tags-in-forms"><a href="#row-tags-in-forms" aria-hidden="true" class="header-anchor">#</a> Row Tags in Forms</h3> <p>In the above example, you'll notice when creating <code>fullNameRow</code> we used a <code>LoginFormTag</code> enumerated type defined in <code>LoginForm</code>.</p> <p>Tags are an important concept in Astro Forms:</p> <ul><li>Tags provide a unique ID for every <code>Row</code></li> <li>Tags can be dynamic using associated values</li> <li>Every <code>Row</code> must have a tag</li> <li>Every <code>Form</code> has an enum that declares it's set of row tags.</li></ul> <p>Create tags by implementing <code>RowTag</code> and <code>Equatable</code>. For example a set of tags might be:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">enum</span> <span class="token builtin">LoginFormTag</span><span class="token punctuation">:</span> <span class="token builtin">RowTag</span><span class="token punctuation">,</span> <span class="token builtin">Equatable</span> <span class="token punctuation">{</span>
	<span class="token keyword">case</span> email<span class="token punctuation">,</span> password<span class="token punctuation">,</span> submit
<span class="token punctuation">}</span>
</code></pre></div><p>A <code>Form</code>'s row tags type must implement <code>Equatable</code> so they can be compared with each other.</p> <h3 id="finding-a-row"><a href="#finding-a-row" aria-hidden="true" class="header-anchor">#</a> Finding a Row</h3> <p>Because every row has a tag you can access them later with the <code>findRow(tag:)</code> instance method:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">let</span> fullNameRow<span class="token punctuation">:</span> <span class="token builtin">TextFieldRow</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">findRow</span><span class="token punctuation">(</span>tag<span class="token punctuation">:</span> <span class="token builtin">LoginFormTag</span><span class="token punctuation">.</span>fullName<span class="token punctuation">)</span>
</code></pre></div><p>If rows are rendered dynamically, associated types provide a convenient way to declare tags for rows that may be generated base on conditions.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">enum</span> <span class="token builtin">LoginFormTag</span><span class="token punctuation">:</span> <span class="token builtin">RowTag</span><span class="token punctuation">,</span> <span class="token builtin">Equatable</span> <span class="token punctuation">{</span>
	<span class="token keyword">case</span> <span class="token function">dynamicTag</span><span class="token punctuation">(</span><span class="token builtin">String</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Later, inside an instance method:</span>

<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">1</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token number">4</span> <span class="token punctuation">{</span>
	<span class="token function">add</span><span class="token punctuation">(</span><span class="token function">TextFieldRow</span><span class="token punctuation">(</span>tag<span class="token punctuation">:</span> <span class="token builtin">LoginFormTag</span><span class="token punctuation">.</span><span class="token function">dynamicTag</span><span class="token punctuation">(</span><span class="token string">&quot;address-line-<span class="token interpolation"><span class="token delimiter variable">\(</span>i<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> foundRow<span class="token punctuation">:</span> <span class="token builtin">TextFieldRow</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">findRow</span><span class="token punctuation">(</span>
	tag<span class="token punctuation">:</span> <span class="token builtin">LoginFormTag</span><span class="token punctuation">.</span><span class="token function">dynamicTag</span><span class="token punctuation">(</span><span class="token string">&quot;address-line-4&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Only use dynamic row tags when absolutely required to avoid runtime errors from mistyped strings.</p></div> <h3 id="removing-a-row"><a href="#removing-a-row" aria-hidden="true" class="header-anchor">#</a> Removing a Row</h3> <p>A Form contains an remove function that will remove a row, and any associated views from the <code>Form</code>.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">public</span> <span class="token keyword">func</span> <span class="token function">remove</span><span class="token punctuation">(</span>at index<span class="token punctuation">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> 
</code></pre></div><h3 id="responding-to-row-changes"><a href="#responding-to-row-changes" aria-hidden="true" class="header-anchor">#</a> Responding to Row Changes</h3> <p>A <code>Form</code> receives all Row updates in a overrideable method:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function">rowUpdate</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> <span class="token builtin">RowUpdate</span><span class="token punctuation">,</span> row<span class="token punctuation">:</span> <span class="token builtin">AnyRow</span><span class="token punctuation">)</span>
</code></pre></div><p>There are several RowUpdate types, that map to common validation requirements, however can be used for any arbitrary form update (for example show/hide).</p> <p>These are:</p> <ul><li><strong>live</strong> <code>rowUpdate</code> called every time the row is changed</li> <li><strong>onResignActive</strong> <code>rowUpdate</code> called every time the row is blurred</li> <li><strong>onResignActiveAfterChange</strong> <code>rowUpdate</code> called on blur after the row has changed at least once</li> <li><strong>regular</strong> <code>rowUpdate</code> called every time the row is changed after the row has been blurred at least once, and every time it is blurred</li></ul> <p>By example, to update the disabled state of a row that contains a button on every row change (ButtonRow):</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function">rowUpdate</span><span class="token punctuation">(</span>type<span class="token punctuation">:</span> <span class="token builtin">RowUpdate</span><span class="token punctuation">,</span> row<span class="token punctuation">:</span> <span class="token builtin">AnyRow</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">guard</span> <span class="token keyword">let</span> tag <span class="token operator">=</span> row<span class="token punctuation">.</span>tag <span class="token keyword">as</span><span class="token operator">?</span> <span class="token builtin">LoginFormTag</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">}</span>
    
    <span class="token keyword">switch</span> type <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token punctuation">.</span>live<span class="token punctuation">:</span>
            
            <span class="token comment">// When any row is updated, update button row validity</span>
            <span class="token keyword">guard</span> <span class="token keyword">let</span> buttonRow<span class="token punctuation">:</span> <span class="token builtin">ButtonRow</span> <span class="token operator">=</span> <span class="token function">findRow</span><span class="token punctuation">(</span>
                tag<span class="token punctuation">:</span> <span class="token builtin">LoginFormTag</span><span class="token punctuation">.</span>submit
            <span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span>
            <span class="token punctuation">}</span>
            
            <span class="token function">updateButtonEnabledStateUI</span><span class="token punctuation">(</span>row<span class="token punctuation">:</span> buttonRow<span class="token punctuation">)</span>
        
        <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token keyword">break</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre></div><h2 id="row"><a href="#row" aria-hidden="true" class="header-anchor">#</a> Row</h2> <p>A Row in Astro Forms is a class that manages any <code>UIView</code> that is inside a <code>Form</code>. This is commonly a view with an input like a <code>UITextField</code>, but it also might just be a view with your company logo, some images, a map - anything.</p> <h3 id="creating-a-row"><a href="#creating-a-row" aria-hidden="true" class="header-anchor">#</a> Creating a Row</h3> <p>To be added to a <code>Form</code> a <code>Row</code> only needs implement the <code>Row</code> protocol. The requirements for this protocol are:</p> <ul><li>To define a <code>UIView</code> type associated with the <code>Row</code></li> <li>Add an property to refer to the <code>UIView</code> for this row</li> <li>Add a <code>tag</code> property to store this row's <code>RowTag</code></li></ul> <p>Here's an example for a row that shows a company logo:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">class</span> <span class="token class-name">CompanyLogoRow</span><span class="token punctuation">:</span> <span class="token builtin">Row</span> <span class="token punctuation">{</span>

	<span class="token comment">// Define the view type</span>
	associatedtype <span class="token builtin">View</span> <span class="token operator">=</span> <span class="token builtin">CompanyLogoView</span>

	<span class="token comment">// The `UIView instance the user will see</span>
	<span class="token keyword">var</span> view<span class="token punctuation">:</span> <span class="token builtin">View</span>

	<span class="token comment">// Every Row must have a RowTag</span>
	<span class="token keyword">var</span> tag<span class="token punctuation">:</span> <span class="token builtin">RowTag</span>

	<span class="token keyword">init</span><span class="token punctuation">(</span>tag<span class="token punctuation">:</span> <span class="token builtin">RowTag</span><span class="token punctuation">,</span> config<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">CompanyLogoRow</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Void</span><span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token constant">nil</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">let</span> view<span class="token punctuation">:</span> <span class="token builtin">View</span> <span class="token operator">=</span> <span class="token builtin">View</span><span class="token punctuation">.</span><span class="token function">fromXib</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">self</span><span class="token punctuation">.</span>view <span class="token operator">=</span> view
		<span class="token keyword">self</span><span class="token punctuation">.</span>tag <span class="token operator">=</span> tag
		config<span class="token operator">?</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>In this example:</p> <ul><li>The <code>CompanyLogoRow</code> includes a view, tag, and a basic initialization method</li> <li>A <code>CompanyLogoView</code> (defined somewhere else), is just a UIView</li> <li>A Xib for the <code>CompanyLogoView</code></li></ul> <p>That's it, this row is ready to be added to a <code>Form</code> with the <code>add(_:)</code> instance method.</p> <h3 id="value-rows"><a href="#value-rows" aria-hidden="true" class="header-anchor">#</a> Value Rows</h3> <p>A row can have a value of any type, simply by implementing the <code>ValueRow</code> protocol. This protocol contains a <code>value</code> instance property for getting and setting the value from the underlying <code>UIView</code>. In the below example this is a Boolean based on a <code>UISwitch</code> state, for a <code>UITextField</code> based row, it would get and set the String <code>text</code> property on the field.</p> <p>This protocol also contains some instance properties and methods (with default implementations) for delegating view updates to the <code>Form</code>.</p> <p>By example, a SwitchRow (containing a <code>UISwitch</code>) with a value:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">UIKit</span>
<span class="token keyword">import</span> <span class="token builtin">AstroForms</span>

<span class="token keyword">class</span> <span class="token class-name">SwitchRow</span><span class="token punctuation">:</span> <span class="token builtin">Row</span><span class="token punctuation">,</span> <span class="token builtin">ValueRow</span> <span class="token punctuation">{</span>

	<span class="token comment">// ValueRow protocol requirements</span>

	<span class="token keyword">typealias</span> <span class="token builtin">Value</span> <span class="token operator">=</span> <span class="token builtin">Bool</span>
    
    <span class="token keyword">var</span> valueHasStartedEditing<span class="token punctuation">:</span> <span class="token builtin">Bool</span> <span class="token operator">=</span> <span class="token boolean">false</span>
    
    <span class="token keyword">var</span> valueHasChanged<span class="token punctuation">:</span> <span class="token builtin">Bool</span> <span class="token operator">=</span> <span class="token boolean">false</span>
    
    <span class="token keyword">var</span> valueHasEndedEditing<span class="token punctuation">:</span> <span class="token builtin">Bool</span> <span class="token operator">=</span> <span class="token boolean">false</span>
    
    <span class="token keyword">var</span> value<span class="token punctuation">:</span> <span class="token builtin">Value</span> <span class="token punctuation">{</span>
        
        <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> view<span class="token punctuation">.</span><span class="token keyword">switch</span><span class="token punctuation">.</span>isOn <span class="token punctuation">}</span>
        
        <span class="token keyword">set</span> <span class="token punctuation">{</span> view<span class="token punctuation">.</span><span class="token keyword">switch</span><span class="token punctuation">.</span><span class="token function">setOn</span><span class="token punctuation">(</span>newValue<span class="token punctuation">,</span> animated<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span>

    <span class="token comment">// Row protocol requirements</span>

    <span class="token keyword">var</span> tag<span class="token punctuation">:</span> <span class="token builtin">RowTag</span>

    <span class="token keyword">var</span> view<span class="token punctuation">:</span> <span class="token builtin">SwitchRowView</span>
    
    <span class="token keyword">init</span><span class="token punctuation">(</span>tag<span class="token punctuation">:</span> <span class="token builtin">RowTag</span><span class="token punctuation">,</span> config<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">SwitchRow</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Void</span><span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token constant">nil</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre></div><p>In implementing <code>ValueRow</code> for this <code>SwitchRow</code>:</p> <ol><li><p>First, we set the Value typealias to a Bool (for when the switch is on or off)</p></li> <li><p>Next, we create a virtual property that gets / sets the switch value, defined in the <code>SwitchRowView</code></p></li> <li><p>Finally, there are three variables <code>valueHasStartedEditing</code>, <code>valueHasChanged</code>, <code>valueHasEndedEditing</code>. These are to manage the validation state for this row. To satisfy the protocol, just assign these default values of <code>false</code>.</p></li></ol> <p>Now, in the <code>Form</code>, we have access to the row, with a Bool value:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token comment">// Inside the Form subclass</span>
<span class="token keyword">let</span> row<span class="token punctuation">:</span> <span class="token builtin">SwitchRow</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token function">findRow</span><span class="token punctuation">(</span>tag<span class="token punctuation">:</span> <span class="token builtin">MyFormTag</span><span class="token punctuation">.</span>mySwitchRow<span class="token punctuation">)</span>

<span class="token keyword">let</span> value<span class="token punctuation">:</span> <span class="token builtin">Bool</span><span class="token operator">?</span> <span class="token operator">=</span> row<span class="token operator">?</span><span class="token punctuation">.</span>value
</code></pre></div><h3 id="responding-to-view-changes"><a href="#responding-to-view-changes" aria-hidden="true" class="header-anchor">#</a> Responding to View Changes</h3> <p>When the value of a <code>ValueRow</code> changes, the <code>ValueRow</code> automatically passes this change information up to a <code>Form</code>. This update is then available in the Form's <code>rowUpdate(type: RowUpdate, row: AnyRow)</code>.</p> <p>However, given a Row's view can be any <code>UIView</code> implementation, these changes could take many shapes. For example, a <code>UISwitch</code> notifies a <code>UIView</code> of updates using the target-action pattern for<code>UIControl.Event.valueChanged</code>, however a UITextField uses a combination of delegate methods and the target-action pattern for <code>UIControl.Event.editingChanged</code>.</p> <p>For this reason, a <code>ValueRow</code> normalizes all changes through several instance methods to call from your view.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token comment">// The value of the view has changed</span>
<span class="token keyword">func</span> <span class="token function">valueDidEdit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// The use has started editing the view, relevant for UITextField etc...</span>
<span class="token keyword">func</span> <span class="token function">valueDidStartEditing</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// The user is done editing. This is the correct method for views that have </span>
<span class="token comment">// instantly changing values too - like a `UISwitch` or `UIButton`</span>
<span class="token keyword">func</span> <span class="token function">valueDidEndEditing</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre></div><p>Call these on a row from the row's UIView implementation, for example:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">class</span> <span class="token class-name">SwitchRowView</span><span class="token punctuation">:</span> <span class="token builtin">UIView</span> <span class="token punctuation">{</span>
    
    <span class="token atrule">@IBOutlet</span> <span class="token keyword">weak</span> <span class="token keyword">var</span> `<span class="token keyword">switch</span>`<span class="token punctuation">:</span> <span class="token builtin">UISwitch</span><span class="token operator">!</span>
    
    <span class="token atrule">@IBOutlet</span> <span class="token keyword">weak</span> <span class="token keyword">var</span> label<span class="token punctuation">:</span> <span class="token builtin">UILabel</span><span class="token operator">!</span>
    
    <span class="token comment">// Store a weak reference to a row so you can call methods on it. </span>
    <span class="token comment">// This can be assigned during Row initialization.</span>
    <span class="token keyword">weak</span> <span class="token keyword">var</span> row<span class="token punctuation">:</span> <span class="token builtin">SwitchRow</span><span class="token operator">?</span>
    
    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function">awakeFromNib</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">awakeFromNib</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        `<span class="token keyword">switch</span>`<span class="token punctuation">.</span><span class="token function">addTarget</span><span class="token punctuation">(</span>
            <span class="token keyword">self</span><span class="token punctuation">,</span>
            action<span class="token punctuation">:</span> #<span class="token function">selector</span><span class="token punctuation">(</span><span class="token function">switchValueChanged</span><span class="token punctuation">(</span><span class="token number">_</span><span class="token punctuation">:</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">for</span><span class="token punctuation">:</span> <span class="token punctuation">.</span>valueChanged
        <span class="token punctuation">)</span>
        
    <span class="token punctuation">}</span>
    
    <span class="token atrule">@objc</span> <span class="token keyword">func</span> <span class="token function">switchValueChanged</span><span class="token punctuation">(</span><span class="token number">_</span> sender<span class="token punctuation">:</span> <span class="token builtin">UISwitch</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token comment">// Call the row's valueDidEndEditing() method, </span>
    	<span class="token comment">// so it can pass this event up for validation etc.</span>
        row<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">valueDidEndEditing</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre></div><h3 id="focusable-rows"><a href="#focusable-rows" aria-hidden="true" class="header-anchor">#</a> Focusable Rows</h3> <p>Astro Forms exposes a <code>FocusableRow</code> protocol to:</p> <ul><li>Enable switching between focusable rows (like text inputs) with next/previous buttons</li> <li>Allow rows to define custom a <code>focusRect</code>. A focusRect is the <code>CGRect</code> that you want form's <code>UIScrollView</code> to ensure is visible on screen when an input is focused. This is useful for ensuring for example, both email and password are visible above the keyboard when the email field is focused. No more hunting behind the keyboard for fields.</li></ul> <p>To implement this protocol:</p> <ol><li>Use a block to return the <code>UIResponder</code> that should be focused when a <code>Row</code> is asked to take focus - for example when the &quot;Next&quot; button on the keyboard is tapped on the previous <code>Row</code>.</li></ol> <div class="language-swift extra-class"><pre class="language-swift"><code> <span class="token keyword">class</span> <span class="token class-name">TextFieldRow</span><span class="token punctuation">:</span> <span class="token builtin">Row</span><span class="token punctuation">,</span> <span class="token builtin">ValueRow</span><span class="token punctuation">,</span> <span class="token builtin">FocusableRow</span> <span class="token punctuation">{</span>
 	<span class="token comment">// ...</span>
    <span class="token keyword">var</span> focusElement<span class="token punctuation">:</span> <span class="token builtin">UIResponder</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> view<span class="token punctuation">.</span>textField <span class="token punctuation">}</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>Provide a default implementation for focusRect to satisfy the protocol. If this is nil, the <code>Form</code> will focus the <code>CGRect</code> for the whole <code>Row</code>. It's almost always best to set this to nil, and provide custom focusRect's when adding rows (so you can reference other rows etc).</li></ol> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">var</span> focusRect<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">CGRect</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token constant">nil</span> <span class="token punctuation">}</span>
</code></pre></div><p>Later when adding rows in your Form, override this block:</p> <div class="language-swift extra-class"><pre class="language-swift"><code>emailRow<span class="token punctuation">.</span>focusRect <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">CGRect</span><span class="token punctuation">(</span>
        x<span class="token punctuation">:</span> emailRow<span class="token punctuation">.</span>baseView<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>origin<span class="token punctuation">.</span>x<span class="token punctuation">,</span>
        y<span class="token punctuation">:</span> emailRow<span class="token punctuation">.</span>baseView<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>origin<span class="token punctuation">.</span>y<span class="token punctuation">,</span>
        width<span class="token punctuation">:</span> emailRow<span class="token punctuation">.</span>baseView<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>width<span class="token punctuation">,</span>
        height<span class="token punctuation">:</span> emailRow<span class="token punctuation">.</span>baseView<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>height <span class="token operator">+</span> passwordRow<span class="token punctuation">.</span>baseView<span class="token punctuation">.</span>frame<span class="token punctuation">.</span>height
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Now when the email row <code>UITextField</code> is the <code>firstResponder</code>, both the emailRow and passwordRow will be visible above the keyboard.</p> <h3 id="helpers"><a href="#helpers" aria-hidden="true" class="header-anchor">#</a> Helpers</h3> <p>A Helper is a reusable <code>UIView</code> that a Row manages that appears after the Row's <code>UIView</code> in a <code>UIStackView</code>. A clear use case for a Helper is error message views that need to show and hide on validation errors. The interface between a <code>Row</code> and a helper is the ability to show and hide the helper.</p> <p>This is done through two methods:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">func</span> showHelper<span class="token operator">&lt;</span>T<span class="token punctuation">:</span> <span class="token builtin">UIView</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>
	viewType<span class="token punctuation">:</span> T<span class="token punctuation">.</span><span class="token keyword">Type</span><span class="token punctuation">,</span> 
	animated<span class="token punctuation">:</span> <span class="token builtin">Bool</span><span class="token punctuation">,</span> 
	config<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Void</span><span class="token punctuation">)</span><span class="token operator">?</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">hideHelper</span><span class="token punctuation">(</span>
	animated<span class="token punctuation">:</span> <span class="token builtin">Bool</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> 
	callback<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Void</span><span class="token punctuation">)</span><span class="token operator">?</span> <span class="token operator">=</span> <span class="token constant">nil</span>
<span class="token punctuation">)</span>
</code></pre></div><p>By example, showing an error using the example helper <code>ErrorView</code> is as simple as calling the show method, and configuring the view:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">guard</span> <span class="token function">validate</span><span class="token punctuation">(</span>row<span class="token punctuation">:</span> row<span class="token punctuation">,</span> <span class="token builtin">ValidationRule</span><span class="token punctuation">.</span><span class="token keyword">required</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    row<span class="token punctuation">.</span><span class="token function">showHelper</span><span class="token punctuation">(</span>viewType<span class="token punctuation">:</span> <span class="token builtin">ErrorView</span><span class="token punctuation">.</span><span class="token keyword">self</span><span class="token punctuation">,</span> animated<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> errorView <span class="token keyword">in</span>
        errorView<span class="token punctuation">.</span>label<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string">&quot;This field is required&quot;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The only unusual thing here is the use of the class type instead of an existing instance as a parameter when showing a helper. This is to avoid the need to store instances of helper views - Astro Forms will manage replacing the view if necessary, or reusing the existing view if it is of the same type.</p> <h2 id="validation"><a href="#validation" aria-hidden="true" class="header-anchor">#</a> Validation</h2> <p>Validation is handled by several instance methods available on <code>Form</code>, and does not enforce any particular architecture.</p> <p>However, as in the example project, the logical place is to handle validation in methods called from <code>func rowUpdate(type: RowUpdate, row: AnyRow)</code> on the form.</p> <h3 id="validation-methods"><a href="#validation-methods" aria-hidden="true" class="header-anchor">#</a> Validation Methods</h3> <p>There are several validation methods available on a form for validating input, with method signatures all beginning <code>validate</code>.</p> <h3 id="basic-validation"><a href="#basic-validation" aria-hidden="true" class="header-anchor">#</a> Basic Validation</h3> <p>The simplest kind of validation takes a variadic parameter of blocks that return boolean values. If all the blocks return true, then the result is true. Each block is passed the row value as it's parameter.</p> <div class="language-swift extra-class"><pre class="language-swift"><code>   <span class="token keyword">func</span> validate<span class="token operator">&lt;</span>R<span class="token punctuation">:</span> <span class="token builtin">ValueRow</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>
        row<span class="token punctuation">:</span> R<span class="token punctuation">,</span>
        <span class="token number">_</span> rules<span class="token punctuation">:</span> <span class="token builtin">ValidationRuleBlock</span><span class="token operator">&lt;</span>R<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Bool</span>
</code></pre></div><p>By example, consider a <code>StringRow</code> with a value of string:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">let</span> isValid<span class="token punctuation">:</span> <span class="token builtin">Bool</span> <span class="token operator">=</span> form<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span>
    row<span class="token punctuation">:</span> stringRow<span class="token punctuation">,</span>
    <span class="token punctuation">{</span> $<span class="token number">0</span> <span class="token operator">==</span> <span class="token string">&quot;astro&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// $0 is the value of the stringRow</span>
    <span class="token punctuation">{</span> $<span class="token number">0</span><span class="token punctuation">.</span><span class="token builtin">count</span> <span class="token operator">==</span> <span class="token number">5</span> <span class="token punctuation">}</span>  <span class="token comment">// typed to String based on the Row's Value associatedtype</span>
<span class="token punctuation">)</span>
</code></pre></div><p>Here, two blocks are passed in, one comparing the <code>StringRow</code> value to &quot;astro&quot;, and another counting the characters.</p> <h3 id="validation-messages"><a href="#validation-messages" aria-hidden="true" class="header-anchor">#</a> Validation Messages</h3> <p>If there are multiple rules being used in a chain, it can be helpful to use a tuple with messages, so rather than just know the chain failed overall, you also have a message for the specific rule that failed.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">func</span> validate<span class="token operator">&lt;</span>R<span class="token punctuation">:</span> <span class="token builtin">ValueRow</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>
        row<span class="token punctuation">:</span> R<span class="token punctuation">,</span>
        <span class="token number">_</span> rules<span class="token punctuation">:</span> <span class="token builtin">ValidationRuleMsgBlock</span><span class="token operator">&lt;</span>R<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token builtin">Bool</span><span class="token punctuation">,</span> <span class="token builtin">String</span><span class="token operator">?</span><span class="token punctuation">)</span>
</code></pre></div><p>By example, the following will return <code>(false, &quot;The character count must be correct&quot;)</code>, for the input string &quot;astro&quot;:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">let</span> isValid <span class="token operator">=</span> form<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span>
    row<span class="token punctuation">:</span> stringRow<span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">{</span> $<span class="token number">0</span> <span class="token operator">==</span> <span class="token string">&quot;astro&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;The string should equal astro&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">{</span> $<span class="token number">0</span><span class="token punctuation">.</span><span class="token builtin">count</span> <span class="token operator">==</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;The character count must be correct&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre></div><h3 id="validation-list"><a href="#validation-list" aria-hidden="true" class="header-anchor">#</a> Validation List</h3> <p>In some situations, you may want to return a full list of messages and true / false for those that pass or fail. A common use case for the structure is a password field with many rules, and you want to show the user which ones they have successfully filled, and those they have yet to pass.</p> <div class="language-swift extra-class"><pre class="language-swift"><code>    <span class="token keyword">func</span> validateList<span class="token operator">&lt;</span>R<span class="token punctuation">:</span> <span class="token builtin">ValueRow</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>
        row<span class="token punctuation">:</span> R<span class="token punctuation">,</span>
        <span class="token number">_</span> rules<span class="token punctuation">:</span> <span class="token builtin">ValidationRuleMsgBlock</span><span class="token operator">&lt;</span>R<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token builtin">Bool</span><span class="token punctuation">,</span> <span class="token builtin">String</span><span class="token operator">?</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</code></pre></div><p>By example, with a password list:</p> <div class="language-swift extra-class"><pre class="language-swift"><code>
<span class="token comment">// Where stringRow.value == &quot;astroforms&quot;</span>

<span class="token keyword">let</span> passwordValidityList <span class="token operator">=</span> form<span class="token punctuation">.</span><span class="token function">validateList</span><span class="token punctuation">(</span>
    row<span class="token punctuation">:</span> stringRow<span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">{</span>$<span class="token number">0</span> <span class="token operator">==</span> <span class="token string">&quot;*&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;The password should contain a *.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">{</span>$<span class="token number">0</span><span class="token punctuation">.</span><span class="token builtin">count</span> <span class="token operator">&gt;</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;The password should have more than 6 characters.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">{</span>$<span class="token number">0</span><span class="token punctuation">.</span><span class="token builtin">count</span> <span class="token operator">&lt;</span> <span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;The password should have less than 30 characters.&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token comment">// Returns:</span>
<span class="token comment">// [(false, &quot;The password should contain a *.&quot;),</span>
<span class="token comment">// (true, &quot;The password should have more than 6 characters.&quot;),</span>
<span class="token comment">// (true, &quot;The password should have less than 30 characters.&quot;)]</span>

</code></pre></div><h3 id="named-validation-rules"><a href="#named-validation-rules" aria-hidden="true" class="header-anchor">#</a> Named Validation Rules</h3> <p>Inline blocks are convenient however not very reusable. Astro Forms contains a factory of <code>ValidationRule</code> methods, these can be mixed with inline blocks. This can be extended with your own methods via an extension.</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">let</span> isValid<span class="token punctuation">:</span> <span class="token builtin">Bool</span> <span class="token operator">=</span> <span class="token function">validate</span><span class="token punctuation">(</span>
	row<span class="token punctuation">:</span> stringRow<span class="token punctuation">,</span>
	<span class="token punctuation">{</span> $<span class="token number">0</span><span class="token punctuation">.</span><span class="token builtin">count</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token builtin">ValidationRule</span><span class="token punctuation">.</span>isEmail
<span class="token punctuation">)</span>
</code></pre></div><h2 id="theming"><a href="#theming" aria-hidden="true" class="header-anchor">#</a> Theming</h2> <p>You can create themes in a type safe way easily in Astro Forms for any kind of property. Themes are defined on a form and inherited by views automatically, although any given instance of a row can override the theme to allow multiple themes to be used in the same form.</p> <p>Theming in Astro Forms can be used independently of forms too, you can apply the <code>Themeable</code> protocol you create to any <code>UIView</code>, simply by implementing the <code>theme</code> instance property and updating themes when you set it. If the given <code>UIView</code> is in a subview of any <code>Form</code>, it won't inherit a theme automatically so you will need to define it on each <code>UIView</code>.</p> <p>Here an example <code>UIImageView</code> subclass that implements a different backgroundImage per theme in the Astro Forms example project:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">class</span> <span class="token class-name">ThemeableImageView</span><span class="token punctuation">:</span> <span class="token builtin">UIImageView</span><span class="token punctuation">,</span> <span class="token builtin">Themeable</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">var</span> theme<span class="token punctuation">:</span> <span class="token builtin">AstroTheme</span><span class="token operator">?</span> <span class="token punctuation">{</span>
        <span class="token keyword">didSet</span> <span class="token punctuation">{</span> <span class="token function">updateTheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">func</span> <span class="token function">updateTheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">self</span><span class="token punctuation">.</span>image <span class="token operator">=</span> <span class="token function">image</span><span class="token punctuation">(</span><span class="token punctuation">.</span>formBackground<span class="token punctuation">)</span> <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
</code></pre></div><h3 id="creating-a-theme"><a href="#creating-a-theme" aria-hidden="true" class="header-anchor">#</a> Creating a Theme</h3> <p>To create a theme, you need to create your own <code>Themeable</code> protocol, composed of various theming protocols that define themable behaviour (color, size) and also those that define how to apply the theme to your <code>UIView</code> subclasses (<code>Form</code> or <code>Row</code> views). These are constrained to concrete enumerated types implementing:</p> <ul><li>The number and names of the different themes in your project (for example: light, dark etc.)</li> <li>The properties that should be applied within the themes (primaryColor, smallMarginSize etc.)</li></ul> <p>This then exposes easy to use methods with a convenience syntax in any UIView that inherits your new protocol.</p> <h4 id="included-themable-protocols"><a href="#included-themable-protocols" aria-hidden="true" class="header-anchor">#</a> Included Themable Protocols</h4> <p>The color function is exposed by <code>ThemeableColorTraits</code>:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function">color</span><span class="token punctuation">(</span><span class="token number">_</span> requirement<span class="token punctuation">:</span> <span class="token builtin">ThemeColorType</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">UIColor</span>
</code></pre></div><p>An example usage is: <code>textView.tintColor = color(.primaryTint)</code>,</p> <p>The image function is exposed by <code>ThemeableImageTraits</code>:</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function">image</span><span class="token punctuation">(</span><span class="token number">_</span> requirement<span class="token punctuation">:</span> <span class="token builtin">ThemeImageType</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">UIImage</span>
</code></pre></div><p>An example usage is: <code>imageView.image = image(.formBackground)</code>.</p> <p>In both these cases, a color and image will be returned for the currently active theme.</p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/5.171457a9.js" defer></script><script src="/assets/js/app.7c8fe348.js" defer></script>
  </body>
</html>
